<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>UseDirtyTracking</title><link rel="preload" href="/react-hooks/_next/static/css/1875af45e5f132be03e6.css" as="style"/><link rel="stylesheet" href="/react-hooks/_next/static/css/1875af45e5f132be03e6.css" data-n-g=""/><link rel="preload" href="/react-hooks/_next/static/css/590628a469a241d226bd.css" as="style"/><link rel="stylesheet" href="/react-hooks/_next/static/css/590628a469a241d226bd.css" data-n-p=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/react-hooks/_next/static/chunks/main-22ac90cb8f942ffd1357.js" as="script"/><link rel="preload" href="/react-hooks/_next/static/chunks/webpack-027398842d5ba2dce04e.js" as="script"/><link rel="preload" href="/react-hooks/_next/static/chunks/framework.c4e8c8a9686b10b38b1c.js" as="script"/><link rel="preload" href="/react-hooks/_next/static/chunks/commons.ee16cb28f81514208ecf.js" as="script"/><link rel="preload" href="/react-hooks/_next/static/chunks/pages/_app-51d7ae5180c23ac9f8f2.js" as="script"/><link rel="preload" href="/react-hooks/_next/static/chunks/c3e90ca6be9a08f0f03b075a7b753d43038e291c.32ca455c33d48f5bff85.js" as="script"/><link rel="preload" href="/react-hooks/_next/static/chunks/pages/%5Bid%5D-e32327e37088b8efdddc.js" as="script"/></head><body><div id="__next"><div id="layout"><nav><a href="/react-hooks"><h2>Hooks</h2></a><a class="" href="/react-hooks/use-array-state">UseArrayState</a><a class="" href="/react-hooks/use-boolean-state">UseBooleanState</a><a class="" href="/react-hooks/use-debounce">UseDebounce</a><a class=" selected" href="/react-hooks/use-dirty-tracking">UseDirtyTracking</a><a class="" href="/react-hooks/use-object-state">UseObjectState</a></nav><main><p></p><div><div class="Tabs_tabs__2MZIJ"><button class="Tabs_tab__7GjgH Tabs_selected__1Sm-v Tabs_white__Z52MD">Readme</button><button class="Tabs_tab__7GjgH Tabs_white__Z52MD">Demo</button><button class="Tabs_tab__7GjgH Tabs_white__Z52MD">Source</button><button class="Tabs_tab__7GjgH Tabs_white__Z52MD">Changelog</button></div><div class="Tabs_container__2ePVH"><div style="padding:1em"><h1>useDirtyTracking</h1>
<blockquote>
<p>Track if one or more values have changed</p>
</blockquote>
<p><a href="https://claveconsulting.github.io/react-hooks/use-dirty-tracking">Documentation</a></p>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> @clave/use-dirty-tracking
</code></pre></div>
<p>This hook will let you konw if values have changed. For example in a form you can enable the submit button if the values have changed.</p>
<h2>Usage</h2>
<div class="remark-highlight"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword module">import</span> <span class="token imports">useDirtyTracking</span> <span class="token keyword module">from</span> <span class="token string">"@clave/use-dirty-tracking"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"original"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// supply one (or more) values to track</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>isDirty<span class="token punctuation">,</span> resetDirty<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDirtyTracking</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// isDirty === false</span>

<span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">"changed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// isDirty === true</span>

<span class="token function">resetDirty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// isDirty === false</span>
</code></pre></div>
</div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"use-dirty-tracking","name":"UseDirtyTracking","demo":{"ts":"import useDirtyTracking from \"@clave/use-dirty-tracking\";\nimport * as React from \"react\";\nimport { useCallback, useState } from \"react\";\nimport style from \"./style.module.css\";\n\nexport default function Demo() {\n  const [value1, setValue1] = useState(\"\");\n  const [value2, setValue2] = useState(0);\n  const [isDirty, resetDirty] = useDirtyTracking(value1, value2);\n\n  const submit = useCallback(() =\u003e {\n    resetDirty();\n  }, []);\n\n  return (\n    \u003cdiv className={style.demo}\u003e\n      \u003clabel\u003e\n        Value1:{\" \"}\n        \u003cinput value={value1} onChange={(e) =\u003e setValue1(e.target.value)} /\u003e\n      \u003c/label\u003e\n      \u003clabel\u003e\n        Value2:{\" \"}\n        \u003cinput\n          type=\"number\"\n          value={value2}\n          onChange={(e) =\u003e setValue2(e.target.valueAsNumber)}\n        /\u003e\n      \u003c/label\u003e\n      {isDirty ? (\n        \u003cstrong\u003eYou can now save the changes\u003c/strong\u003e\n      ) : (\n        \u003cem\u003eChange one of the values above\u003c/em\u003e\n      )}\n      \u003cbutton disabled={!isDirty} onClick={submit}\u003e\n        Save changes\n      \u003c/button\u003e\n    \u003c/div\u003e\n  );\n}\n","js":"import useDirtyTracking from \"@clave/use-dirty-tracking\";\nimport * as React from \"react\";\nimport { useCallback, useState } from \"react\";\nimport style from \"./style.module.css\";\nexport default function Demo() {\n    const [value1, setValue1] = useState(\"\");\n    const [value2, setValue2] = useState(0);\n    const [isDirty, resetDirty] = useDirtyTracking(value1, value2);\n    const submit = useCallback(() =\u003e {\n        resetDirty();\n    }, []);\n    return (\u003cdiv className={style.demo}\u003e\n      \u003clabel\u003e\n        Value1:{\" \"}\n        \u003cinput value={value1} onChange={(e) =\u003e setValue1(e.target.value)}/\u003e\n      \u003c/label\u003e\n      \u003clabel\u003e\n        Value2:{\" \"}\n        \u003cinput type=\"number\" value={value2} onChange={(e) =\u003e setValue2(e.target.valueAsNumber)}/\u003e\n      \u003c/label\u003e\n      {isDirty ? (\u003cstrong\u003eYou can now save the changes\u003c/strong\u003e) : (\u003cem\u003eChange one of the values above\u003c/em\u003e)}\n      \u003cbutton disabled={!isDirty} onClick={submit}\u003e\n        Save changes\n      \u003c/button\u003e\n    \u003c/div\u003e);\n}\n"},"source":{"ts":"import { useCallback, useEffect, useRef, useState } from \"react\";\n\n/**\n * Track if one or more values have changed\n *\n * @param values The values to keep track of\n */\nexport default function useDirtyTracking(...values: unknown[]): [boolean, () =\u003e void] {\n  const [original, setOriginal] = useState(values);\n\n  const latest = useRef(values);\n  useEffect(() =\u003e {\n    latest.current = values;\n  });\n\n  const resetDirty = useCallback(() =\u003e setOriginal(latest.current), []);\n\n  return [isDirty(original, values), resetDirty];\n}\n\nexport function isDirty(a: unknown[], b: unknown[]){\n  if(a.length !== b.length){\n    return true;\n  }\n\n  for(let i=0; i\u003ca.length; i++){\n    if(!Object.is(a[i], b[i])) return true\n  }\n\n  return false;\n}","js":"import { useCallback, useEffect, useRef, useState } from \"react\";\n/**\n * Track if one or more values have changed\n *\n * @param values The values to keep track of\n */\nexport default function useDirtyTracking(...values) {\n    const [original, setOriginal] = useState(values);\n    const latest = useRef(values);\n    useEffect(() =\u003e {\n        latest.current = values;\n    });\n    const resetDirty = useCallback(() =\u003e setOriginal(latest.current), []);\n    return [isDirty(original, values), resetDirty];\n}\nexport function isDirty(a, b) {\n    if (a.length !== b.length) {\n        return true;\n    }\n    for (let i = 0; i \u003c a.length; i++) {\n        if (!Object.is(a[i], b[i]))\n            return true;\n    }\n    return false;\n}\n"},"links":[{"name":"UseArrayState","path":"use-array-state"},{"name":"UseBooleanState","path":"use-boolean-state"},{"name":"UseDebounce","path":"use-debounce"},{"name":"UseDirtyTracking","path":"use-dirty-tracking"},{"name":"UseObjectState","path":"use-object-state"}],"readme":"\u003ch1\u003euseDirtyTracking\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTrack if one or more values have changed\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://claveconsulting.github.io/react-hooks/use-dirty-tracking\"\u003eDocumentation\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e @clave/use-dirty-tracking\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis hook will let you konw if values have changed. For example in a form you can enable the submit button if the values have changed.\u003c/p\u003e\n\u003ch2\u003eUsage\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-jsx\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003euseDirtyTracking\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"@clave/use-dirty-tracking\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e setValue\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"original\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// supply one (or more) values to track\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eisDirty\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e resetDirty\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseDirtyTracking\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// isDirty === false\u003c/span\u003e\n\n\u003cspan class=\"token function\"\u003esetValue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"changed\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// isDirty === true\u003c/span\u003e\n\n\u003cspan class=\"token function\"\u003eresetDirty\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// isDirty === false\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n","changelog":"\u003ch1\u003eChange Log\u003c/h1\u003e\n\u003cp\u003eAll notable changes to this project will be documented in this file.\nSee \u003ca href=\"https://conventionalcommits.org\"\u003eConventional Commits\u003c/a\u003e for commit guidelines.\u003c/p\u003e\n\u003ch2\u003e1.0.1 (2020-10-30)\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eNote:\u003c/strong\u003e Version bump only for package @clave/use-dirty-tracking\u003c/p\u003e\n"},"__N_SSG":true},"page":"/[id]","query":{"id":"use-dirty-tracking"},"buildId":"4y7GqllPz-fzrI-YcSibF","assetPrefix":"/react-hooks","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["title",{"children":"UseDirtyTracking"}]]}</script><script nomodule="" src="/react-hooks/_next/static/chunks/polyfills-d41557e3211d7cb2e429.js"></script><script src="/react-hooks/_next/static/chunks/main-22ac90cb8f942ffd1357.js" async=""></script><script src="/react-hooks/_next/static/chunks/webpack-027398842d5ba2dce04e.js" async=""></script><script src="/react-hooks/_next/static/chunks/framework.c4e8c8a9686b10b38b1c.js" async=""></script><script src="/react-hooks/_next/static/chunks/commons.ee16cb28f81514208ecf.js" async=""></script><script src="/react-hooks/_next/static/chunks/pages/_app-51d7ae5180c23ac9f8f2.js" async=""></script><script src="/react-hooks/_next/static/chunks/c3e90ca6be9a08f0f03b075a7b753d43038e291c.32ca455c33d48f5bff85.js" async=""></script><script src="/react-hooks/_next/static/chunks/pages/%5Bid%5D-e32327e37088b8efdddc.js" async=""></script><script src="/react-hooks/_next/static/4y7GqllPz-fzrI-YcSibF/_buildManifest.js" async=""></script><script src="/react-hooks/_next/static/4y7GqllPz-fzrI-YcSibF/_ssgManifest.js" async=""></script></body></html>